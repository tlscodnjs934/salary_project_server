<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="blankspace.blankspaceprj.dao.CalendarDAO">

    <select id="selectCalendar">
        SELECT          /*CalenderMapper.xml - selectCalendar*/
            A.ID,
            A.AUTH_TYPE,
            A.SCHEDULE_DATE,
            A.STATE,
            A.CONTENT,
            A.DAY_OFF
        FROM CALENDAR A
        WHERE 1=1
            AND A.ID = #{ID}
            AND A.AUTH_TYPE = #{AUTH_TYPE}
            AND A.SCHEDULE_DATE = #{SCHEDULE_DATE}
            AND A.DEL_YN = 'N'
    </select>

    <select id="selectScheduleList">
        SELECT              /*CalenderMapper.xml - selectScheduleList*/
            A.ID,
            A.AUTH_TYPE,
            A.SCHEDULE_DATE,
            A.SN,
            A.TO_DO,
            A.CHK_YN,
            A.TIME_START,
            A.TIME_END
        FROM SCHEDULE A
        WHERE 1=1
            AND A.ID = #{ID}
            AND A.AUTH_TYPE = #{AUTH_TYPE}
            AND A.SCHEDULE_DATE = #{SCHEDULE_DATE}
            AND A.DEL_YN = 'N'
    </select>

    <insert id="mergeSchedule">
        INSERT INTO SCHEDULE (      /* 회원가입 등록 CalenderMapper.xml - mergeSchedule */
            ID,
            AUTH_TYPE,
            SCHEDULE_DATE,
            SN,
            TO_DO,
            TIME_START,
            TIME_END
        )
        VALUES (
            #{ID},
            #{AUTH_TYPE},
            #{SCHEDULE_DATE},
            #{SN},
            #{TO_DO},
            #{TIME_START},
            #{TIME_END}
        ) ON DUPLICATE KEY UPDATE
        TO_DO = #{TO_DO},
        CHK_YN = #{CHK_YN},
        TIME_START = #{TIME_START},
        TIME_END = #{TIME_END},
        DEL_YN = #{DEL_YN}
    </insert>

    <insert id="mergeCalendar">
        INSERT INTO CALENDAR (      /* 회원가입 등록 CalenderMapper.xml - mergeCalendar */
            ID,
            AUTH_TYPE,
            SCHEDULE_DATE,
            STATE,
            CONTENT,
            DAY_OFF
        )
        VALUES (
            #{ID},
            #{AUTH_TYPE},
            #{SCHEDULE_DATE},
            #{STATE},
            #{CONTENT},
            #{DAY_OFF}
        ) ON DUPLICATE KEY UPDATE
        STATE = #{STATE},
        CONTENT = #{CONTENT},
        DAY_OFF = #{DAY_OFF},
        DEL_YN = #{DEL_YN}
    </insert>


</mapper>